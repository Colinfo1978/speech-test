<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>èªéŸ³è½‰æ–‡å­—æ¸¬è©¦</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    button { padding: 10px 20px; font-size: 16px; }
    #result { margin-top: 20px; font-size: 18px; color: green; }
    select { font-size: 16px; margin-left: 10px; }
  </style>
</head>
<body>
  <h2>ğŸ¤ èªéŸ³è½‰æ–‡å­—æ¸¬è©¦</h2>
  <label>é¸æ“‡èªè¨€ï¼š
    <select id="lang">
      <option value="zh-TW">ä¸­æ–‡ï¼ˆå°ç£ï¼‰</option>
      <option value="en-US">Englishï¼ˆUSï¼‰</option>
    </select>
  </label>
  <br/><br/>
  <button id="startBtn">é–‹å§‹è¾¨è­˜</button>
  <div id="result">è«‹é»ä¸Šæ–¹æŒ‰éˆ•é–‹å§‹èªªè©±...</div>

  <script>
    const startBtn = document.getElementById('startBtn');
    const resultDiv = document.getElementById('result');
    const langSelect = document.getElementById('lang');

    let recognition;
    if (!('webkitSpeechRecognition' in window)) {
      resultDiv.innerText = "âŒ ä½ çš„ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³è¾¨è­˜ Web Speech API";
    } else {
      recognition = new webkitSpeechRecognition();
      recognition.continuous = false;  // ä¸€å¥è©±çµæŸå°±åœ
      recognition.interimResults = false;

      recognition.onstart = () => {
        resultDiv.innerText = "ğŸ™ï¸ é–‹å§‹èªªè©±...";
        startBtn.disabled = true;
      };

      recognition.onerror = (event) => {
        resultDiv.innerText = "âš ï¸ éŒ¯èª¤ï¼š" + event.error;
        startBtn.disabled = false;
      };

      recognition.onresult = (event) => {
        const text = event.results[0][0].transcript;
        resultDiv.innerText = "âœ… è¾¨è­˜çµæœï¼š" + text;
        startBtn.disabled = false;
      };

      recognition.onend = () => {
        startBtn.disabled = false;
      };

      startBtn.onclick = () => {
        recognition.lang = langSelect.value;
        recognition.start();
      };
    }
  </script>
</body>
</html>
